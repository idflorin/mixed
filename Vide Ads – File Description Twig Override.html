<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Video Ads â€“ File Description Twig Override</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 2rem;
      max-width: 800px;
    }
    code {
      background: #f4f4f4;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
    }
    pre {
      background: #f9f9f9;
      border-left: 4px solid #ccc;
      padding: 1rem;
      overflow-x: auto;
    }
    h1, h2, h3 {
      color: #333;
    }
  </style>
</head>
<body>

  <h1>Custom Twig Override for Video Description in <code>video_ads</code></h1>

  <h2>ðŸŽ¯ Purpose</h2>
  <p>This setup allows the <strong>file description</strong> from a referenced <strong>Video Media</strong> item to be displayed alongside the video player within the <code>video_ads</code> content type. The description comes from the <strong>file fieldâ€™s subfield</strong>, which is not exposed by default in Drupal's admin UI.</p>

  <h2>ðŸ§± Content & Field Setup</h2>
  <ul>
    <li><strong>Content type</strong>: <code>video_ads</code></li>
    <li><strong>Media reference field</strong>: <code>field_video_upload</code></li>
    <li><strong>Media type referenced</strong>: <code>Video</code></li>
    <li><strong>Video file field on media</strong>: <code>field_media_video_file</code></li>
    <li><strong>Subfield containing the description</strong>: <code>description</code> (on the file entity)</li>
  </ul>

  <h2>ðŸ§© Implementation Steps</h2>

  <h3>1. Create the Twig Template</h3>
  <p><strong>Template filename:</strong></p>
  <pre><code>field--node--field-video-upload.html.twig</code></pre>

  <p><strong>Location:</strong></p>
  <pre><code>/themes/custom/YOUR_THEME/templates/</code></pre>
  <p>Replace <code>YOUR_THEME</code> with the actual name of your active theme.</p>

  <h3>2. Paste the Following Twig Code</h3>
  <pre><code>{% raw %}
{#
 * field--node--field-video-upload.html.twig
 * Custom template to show video and file description
#}

{% for item in items %}
  {% set media = item['#media'] %}
  {% if media.field_media_video_file is defined %}
    {% set file = media.field_media_video_file.entity %}
    {% set description = file.description.value %}
  {% endif %}

  &lt;div class="video-ad-wrapper"&gt;
    &lt;div class="video-player"&gt;
      {{ item.content }}
    &lt;/div&gt;

    {% if description %}
      &lt;div class="video-description"&gt;
        {{ description }}
      &lt;/div&gt;
    {% endif %}
  &lt;/div&gt;
{% endfor %}
{% endraw %}</code></pre>

  <h3>3. Clear Drupal Cache</h3>
  <p>Clear caches to make Drupal recognize the new template:</p>

  <p><strong>Using Drush:</strong></p>
  <pre><code>drush cr</code></pre>

  <p><strong>Or via UI:</strong></p>
  <pre><code>Admin > Configuration > Development > Performance > Clear all caches</code></pre>

  <h3>4. Verify It Works</h3>
  <p>Visit a node of content type <code>video_ads</code> that uses the <code>field_video_upload</code> media field. You should see:</p>
  <ul>
    <li>The video player</li>
    <li>The file description (if it was filled in when uploading the file)</li>
  </ul>

  <h2>ðŸŽ¨ Optional Styling</h2>
  <p>Add this to your themeâ€™s CSS file to style the description text:</p>
  <pre><code>.video-description {
  font-size: 0.9em;
  color: #666;
  margin-top: 8px;
  font-style: italic;
}</code></pre>

  <h2>ðŸ§ª Troubleshooting</h2>
  <ul>
    <li>Make sure the <strong>file actually has a description</strong> in the media entity.</li>
    <li>If it still doesn't work, use <code>{{ dump(media) }}</code> in the template to debug what's being passed in.</li>
    <li>Ensure the theme you're editing is the <strong>active</strong> one.</li>
    <li>Confirm the file name matches the exact field machine name.</li>
  </ul>

  <h2>âœ… Summary</h2>
  <p>This approach uses a field-level Twig override to render a subfield (<code>description</code>) from a file embedded in a media entity, since the Drupal UI does not expose this subfield in view modes or media display settings.</p>

</body>
</html>
