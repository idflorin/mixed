  <h1>Custom Twig Override for Video Description in <code>video_ads</code></h1>

  <h2>ðŸŽ¯ Purpose</h2>
  <p>This setup allows the <strong>file description</strong> from a referenced <strong>Video Media</strong> item to be displayed alongside the video player within the <code>video_ads</code> content type. The description comes from the <strong>file fieldâ€™s subfield</strong>, which is not exposed by default in Drupal's admin UI.</p>

  <h2>ðŸ§± Content & Field Setup</h2>
  <ul>
    <li><strong>Content type</strong>: <code>video_ads</code></li>
    <li><strong>Media reference field</strong>: <code>field_video_upload</code></li>
    <li><strong>Media type referenced</strong>: <code>Video</code></li>
    <li><strong>Video file field on media</strong>: <code>field_media_video_file</code></li>
    <li><strong>Subfield containing the description</strong>: <code>description</code> (on the file entity)</li>
  </ul>

  <h2>ðŸ§© Implementation Steps</h2>

  <h3>1. Create the Twig Template</h3>
  <p><strong>Template filename:</strong></p>
  <pre><code>field--node--field-video-upload.html.twig</code></pre>

  <p><strong>Location:</strong></p>
  <pre><code>/themes/custom/YOUR_THEME/templates/</code></pre>
  <p>Replace <code>YOUR_THEME</code> with the actual name of your active theme.</p>

  <h3>2. Paste the Following Twig Code (with Node Type + View Mode Condition)</h3>

  <pre><code>{% raw %}
{#
 * field--node--field-video-upload.html.twig
 * Only render file description for node type 'video_ads' and view mode 'full'
#}

{% for item in items %}
  {% set media = item['#media'] %}
  {% set node = item['#object'] %}
  {% set view_mode = item['#view_mode'] ?? '' %}
  
  {% if node.bundle == 'video_ads' and view_mode == 'full' %}
    {% if media.field_media_video_file is defined %}
      {% set file = media.field_media_video_file.entity %}
      {% set description = file.description.value %}
    {% endif %}

    &lt;div class="video-ad-wrapper"&gt;
      &lt;div class="video-player"&gt;
        {{ item.content }}
      &lt;/div&gt;

      {% if description %}
        &lt;div class="video-description"&gt;
          {{ description }}
        &lt;/div&gt;
      {% endif %}
    &lt;/div&gt;
  {% else %}
    {# Default fallback if not in allowed node type/view mode #}
    {{ item.content }}
  {% endif %}
{% endfor %}
{% endraw %}</code></pre>

  <h3>3. Clear Drupal Cache</h3>
  <p>Clear caches to make Drupal recognize the new template:</p>

  <p><strong>Using Drush:</strong></p>
  <pre><code>drush cr</code></pre>

  <p><strong>Or via UI:</strong></p>
  <pre><code>Admin > Configuration > Development > Performance > Clear all caches</code></pre>

  <h3>4. Verify It Works</h3>
  <p>Visit a node of content type <code>video_ads</code> in <code>full</code> view mode that uses the <code>field_video_upload</code> media field. You should see:</p>
  <ul>
    <li>The video player</li>
    <li>The file description (if filled in when uploading the file)</li>
  </ul>

  <h2>ðŸŽ¨ Optional Styling</h2>
  <p>Add this to your themeâ€™s CSS file to style the description text:</p>
  <pre><code>.video-description {
  font-size: 0.9em;
  color: #666;
  margin-top: 8px;
  font-style: italic;
}</code></pre>

  <h2>ðŸ§ª Troubleshooting</h2>
  <ul>
    <li>Ensure the file actually has a description in the media entity.</li>
    <li>Use <code>{{ dump(media) }}</code> to debug what's available in the template.</li>
    <li>Make sure your theme is active and the file name is correct.</li>
    <li>Ensure the view mode used is exactly <code>full</code> or change it in the template condition.</li>
  </ul>

  <h2>âœ… Summary</h2>
  <p>This approach uses a field-level Twig override to render a subfield (<code>description</code>) from a file embedded in a media entity. By wrapping the logic in a condition, you ensure it only runs for specific content types and view modes, keeping your output clean and modular.</p>
